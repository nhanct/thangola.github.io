
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Làm chủ Linux Bash shell: Tùy biến command promt với biến $PS1 - just a lazy admin</title>
  <meta name="author" content="Thang Pham">

  
  <meta name="description" content="Tiếp tục seri bài làm chủ Linux Bash shell nào. Bài viết này được tôi dựa vào một tutorial của tôi trên FOTECH và mở rộng thêm, nếu bạn nào thấy hơi &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://thangola.github.io/blog/2009/03/22/lam-chu-linux-bash-shell-tuy-bien">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="just a lazy admin" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">just a lazy admin</a></h1>
  
    <h2>don't ask how to use, just wonder how to make...</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:thangola.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Làm chủ Linux Bash shell: Tùy biến command promt với biến $PS1</h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-03-22T00:00:00+07:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2009</time>
        
      </p>
    
  </header>


<div class="entry-content"><div class='post'>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_7HQMEKpIxtQ/SceuSTTESKI/AAAAAAAAAYU/1AoEwOUH9m0/s1600-h/T%C3%B9y+bi%E1%BA%BFn+command+promt+v%E1%BB%9Bi+bi%E1%BA%BFn+%24PS1.jpg"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 400px; height: 264px;" src="http://3.bp.blogspot.com/_7HQMEKpIxtQ/SceuSTTESKI/AAAAAAAAAYU/1AoEwOUH9m0/s400/T%C3%B9y+bi%E1%BA%BFn+command+promt+v%E1%BB%9Bi+bi%E1%BA%BFn+%24PS1.jpg" alt="" id="BLOGGER_PHOTO_ID_5316409514575284386" border="0" /></a><br /><span style="font-style: italic;">Tiếp tục seri bài làm chủ Linux Bash shell nào. Bài viết này được tôi dựa vào một tutorial của tôi trên FOTECH và mở rộng thêm, nếu bạn nào thấy hơi quen xin đừng thắc mắc >:).</span><br /><br />Bash shell có khả năng hiển thị trước mỗi dòng lệnh một đoạn thông tin ngắn, gọi là <span style="font-weight: bold;">dấu nhắc lệnh</span>, hay <span style="font-weight: bold;">command promt</span>. Mặc định có dạng:<br /><div class="codemain"><!--ec1--><span style="font-family:courier new;"></span><blockquote style="color: rgb(0, 102, 0);"><span style="font-family:courier new;">[user]@[host]:[đường dẫn]$ </span></blockquote><span style="font-weight: bold;">VD:</span><br /><span style="color: rgb(0, 102, 0);font-family:courier new;" ><blockquote>thangphamduy@mr-PC:~$</blockquote></span><!--c2--></div>Bạn có thể tùy biến bằng cách sửa lại giá trị của biến môi trường PS1 như sau:<div class="codemain"><!--ec1--><span style="font-family:courier new;"></span><blockquote style="color: rgb(0, 102, 0);"><span style="font-family:courier new;">PS1=&#8217;<span style="font-style: italic;">[Noi dung muon hien thi]</span>&#8217;</span></blockquote><span style="font-weight: bold;">VD:</span> nếu dòng trên có nội dung là:<br /><span style="font-family:courier new;"></span><blockquote style="color: rgb(0, 102, 0);"><span style="font-family:courier new;">PS1=&#8217;Welcome to my Linux  &#8217;</span></blockquote>thì trước mỗi dòng lệnh sẽ hiển thị đúng xâu trên.<!--c2--></div><!--ec2--><br />Bạn có thể tùy biến xâu <span style="font-style: italic;font-family:courier new;" >[Noi dung muon hien thi]</span> bằng cách chèn vào một ký tự sau dấu thoát (backslash \) như sau:<div class="codemain" face="courier new"><!--ec1--><blockquote>\!    Hiển thị số thứ tự của lệnh trong history<br />\#    Hiển thị số thứ tự lệnh của lệnh hiện tại<br />\$    Hiển thị dấu $ nếu là user bình thường và dấu # nếu là user root<br />&#92;    Hiển thị dấu backslash (\)<br />\d    Hiển thị ngày hiện tại<br />\h    Hiển thị host name<br />\n    In dấu xuống dòng<br />\s    Hiển thị tên shell<br />\t    Hiển thị giờ hiện tại<br />\u    Hiển thị username<br />\W    Hiển thị tên thư mục hiện hành<br />\w    Hiển thị đường dẫn đầy đủ của thư mục hiện hành</blockquote><!--c2--></div><!--ec2--><span style="font-weight: bold;">Ví dụ:</span><div class="codemain" style="font-family: courier new;"><!--ec1--><blockquote><span style="color: rgb(0, 102, 0);">PS1=&#8217;\u\$&#8217;</span><br />sẽ cho kết quả: &#8221;<span style="color: rgb(0, 102, 0);">root#</span>&#8221;<br /><span style="color: rgb(0, 102, 0);">PS1=&#8217;\u@\t \w\$&#8217;</span><br />sẽ cho kết quả: &#8221;<span style="color: rgb(0, 102, 0);">root@20:49:48 /etc/httpd</span>#<br /><span style="color: rgb(0, 102, 0);">PS1=&#8217;\t \u@\h \s \$&#8217;</span><br />sẽ cho kết quả: &#8221;<span style="color: rgb(0, 102, 0);">20:49:48 root@proLappy -bash #</span>&#8221;<br /></blockquote><!--c2--></div><!--ec2--><span style="font-weight: bold;">[*]Hiển thị màu:</span><br />Bạn thử thiết lập biến PS1 như sau và xem kết quả như thế nào ^^<div style="font-family: courier new; color: rgb(0, 102, 0);" class="codemain"><blockquote><!--ec1-->PS1=&#8217;\[\033[01;32m\]\t \u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ &#8217;<!--c2--></blockquote></div><!--ec2-->Bây giờ dấu nhắc lệnh đã có màu xanh lá cây :D. Quy tắc ở đây là thư thế nào? Nếu bạn muốn đặt một màu cho một phần tử nào đó của promt, bạn hãy đặt mã màu trước phần tử đó, và mã xóa màu sau phần tử đó.<br /><br /><span style="font-style: italic;">Mã màu có dạng:</span><br /><blockquote><span style="color: rgb(0, 102, 0);font-family:courier new;" >\[\033\[01;32m\]\]</span><br /></blockquote>Hãy thay thế 32 với các số trong khoảng 30 - 37 để nhận được các màu khác nhau, thay thế 01 với các số trong khoảng 00 - 07 để nhận được các cách tô màu khác nhau (làm nhạt màu, màu gạch chân, màu highlight,&#8230;)<br /><br /><span style="font-style: italic;">Mã đóng màu:</span><br /><blockquote></blockquote><blockquote style="font-family: courier new; color: rgb(0, 102, 0);">\[\033[00m\]</blockquote><span style="font-weight: bold;">[*] Lưu ý:</span><br />- Nếu bạn không sử dụng mã đóng màu thì màu đó sẽ còn hiệu lực cho tới khi bạn dùng một mã màu khác thay thế.<br />- Việc thiết lập mã màu chỉ có ý nghĩa với những terminal có hỗ trợ màu 16bit trở lên như <span style="font-family:courier new;">xterm</span>, <span style="font-family:courier new;">rxvt</span>, hay <span style="font-family:courier new;">gnome-terminal</span>, <span style="font-family:courier new;">konsole</span>,&#8230;<br /><u><b><br /></b></u>Okie. Như thế là bạn đã có thể thêm các thông tin hữu ích và đẹp mắt vào trước mỗi dòng lệnh trong terminal. Nhưng nếu bạn logout, giá trị vừa thiết lập cho biến $PS1 sẽ bị reset về giá trị default! Để không phải thiết lập lại giá trị của biến này, hãy thêm vào cuối file ~/.bashrc dòng lệnh sau để export giá trị mới cho biến môi trường PS1:<br /><blockquote style="color: rgb(0, 102, 0);"><span style="font-family:courier new;">export </span><span style="font-family:courier new;">PS1=&#8217;\n\[\033[02;31m\]. ___ ___ ___\[\033[00m\] |&#8212; \[\033[02;33m\]\t \d\n\[\033[02;31m\] /__// _// ./\[\033[00m\] &#8212; \[\033[01;32m\]\w\n\[\033[02;31m\]/ . / \ /__/\[\033[00m\] \[\033[02;35m\]\u@\h \[\033[02;37m\]\$ \[\033[02;38m\]&#8217;</span></blockquote>Chúc các bạn ngày chủ nhật vui vẻ.<br /><br /><span style="font-weight: bold; color: rgb(0, 51, 0);">Update</span><span style="color: rgb(0, 51, 0);">:</span> Để xem danh sách các mã màu và một số ví dụ khác, xin đọc entry <a href="http://tuyetkiem.wordpress.com/2009/03/25/command-prompt-ps1/">Command promt và biến PS1</a> trên <a href="http://tuyetkiem.wordpress.com/">blog của tuyetkiem</a>.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>http://abebedorespgondufo.blogs.sapo.pt/</div>
<div class='content'>
Good blog.<BR/>Portugal</div>
</div>
</div>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Thang Pham</span></span>

      








  


<time datetime="2009-03-22T00:00:00+07:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/lam-chu-bash-shell/'>làm chủ Bash shell</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://thangola.github.io/blog/2009/03/22/lam-chu-linux-bash-shell-tuy-bien/" data-via="thangola" data-counturl="http://thangola.github.io/blog/2009/03/22/lam-chu-linux-bash-shell-tuy-bien/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2009/03/16/giai-phap-hoan-chinh-cho-viec-convert/" title="Previous Post: Giải pháp hoàn chỉnh cho việc convert file PDF thành file DOC">&laquo; Giải pháp hoàn chỉnh cho việc convert file PDF thành file DOC</a>
      
      
        <a class="basic-alignment right" href="/blog/2009/03/29/magic-pen-met-game-giai-tri-rat-hay-phu/" title="Next Post: Cây bút ma thuật">Cây bút ma thuật &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/01/02/bai-viet-dau-tien-voi-octopress/">Bài viết đầu tiên với Octopress Blog</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/17/ngan-ngua-quit-nham-chrome-tren-mac/">Ngăn ngừa quit nhầm Chrome trên Mac</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/30/problem-with-proftpd-134-on-rpmforge/">Problem with proftpd 1.3.4 on RPMForge repository</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/07/yum-liet-ke-danh-sach-file-trong-mot-goi/">Yum - Liệt kê danh sách file trong một gói</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/09/install-skypetab-ng-on-fedora/">Install SkypeTab-NG on Fedora</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/thangola?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/thangola">My Delicious Bookmarks &raquo;</a></p>
</section>




  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Thang Pham -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
